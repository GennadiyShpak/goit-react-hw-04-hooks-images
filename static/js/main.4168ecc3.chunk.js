(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{18:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),o=n(3),s=n.n(o),i=(n(18),n(5)),u=n.n(i),l=n(11),j=n(8),b=n(4),h=n(9),m=(n(20),n(12)),d=n.n(m);n(42);var f=function(e){var t=e.onSubmit,n=Object(r.useState)(""),a=Object(b.a)(n,2),o=a[0],s=a[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("header",{className:"Searchbar",children:Object(c.jsxs)("form",{className:"SearchForm",onSubmit:function(e){if(e.preventDefault(),""===o.trim())return h.b.error("Wrong request !");t(o),s("")},children:[Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(c.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",onChange:function(e){var t=e.target.value;s(t)},value:o})]})})})};var O=function(e){var t=e.fetchArr,n=e.showModal,r=e.onClick;return t.map((function(e){return Object(c.jsx)("li",{className:"ImageGalleryItem",onClick:n,children:Object(c.jsx)("img",{"data-url":e.largeImageURL,src:e.webformatURL,alt:e.tags,className:"ImageGalleryItem-image",onClick:r})},e.id)}))};var p=function(e){var t=e.fetchArr,n=e.showModal,r=e.onClick;return Object(c.jsx)(c.Fragment,{children:t&&Object(c.jsx)("ul",{className:"ImageGallery ",children:Object(c.jsx)(O,{fetchArr:t,showModal:n,onClick:r})})})};var g=function(e){var t=e.onClick;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})},x=(n(43),document.querySelector("#modal-root"));function v(e){var t=e.onClose,n=e.children;function a(e){"Escape"===e.code&&t()}return Object(r.useEffect)((function(){return window.addEventListener("keydown",a),function(){window.removeEventListener("keydown",a)}})),Object(o.createPortal)(Object(c.jsx)("div",{className:"Modal__backdrop",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(c.jsx)("div",{className:"Modal__content",children:n})}),x)}var S=function(e){var t=e.imageSrc;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("img",{src:t,alt:""})})},w="18984826-9a089bf93f102eeea865f0aeb",k="https://pixabay.com/api/?&image_type=photo&orientation=horizontal";function y(){return(y=Object(j.a)(u.a.mark((function e(t,n){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(k,"&&key=").concat(w,"&q=").concat(t,"&page=").concat(n));case 3:return c=e.sent,e.next=6,c.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var C=function(e,t){return y.apply(this,arguments)};var F=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(null),s=Object(b.a)(o,2),i=s[0],m=s[1],O=Object(r.useState)(1),x=Object(b.a)(O,2),w=x[0],k=x[1],y=Object(r.useState)(!1),F=Object(b.a)(y,2),N=F[0],E=F[1],I=Object(r.useState)(""),L=Object(b.a)(I,2),M=L[0],A=L[1],_=Object(r.useState)(!1),B=Object(b.a)(_,2),T=B[0],q=B[1],G=Object(r.useState)(!1),P=Object(b.a)(G,2),D=P[0],J=P[1];function R(){E(!N)}return Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,C(n,w);case 4:t=e.sent,0===(c=t.hits).length?J(!0):(m((function(e){return[].concat(Object(l.a)(e),Object(l.a)(c))})),q(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error",D);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}n&&function(){e.apply(this,arguments)}()}),[w,D,n]),Object(r.useEffect)((function(){n&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(f,{onSubmit:function(e){n!==e&&(a(e),m([]),k(1),q(!0))}}),D&&Object(c.jsxs)("h1",{children:["\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ",Object(c.jsxs)("span",{className:"error",children:['"',n,'"']}),"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"]}),T&&Object(c.jsx)(d.a,{type:"Audio",color:"#00BFFF",height:80,width:80}),Object(c.jsx)(p,{showModal:R,fetchArr:i,onClick:function(e){var t=e.target,n=t.dataset.url;A(n),console.log(t)}}),i&&!D&&Object(c.jsx)(g,{onClick:function(){k((function(e){return e+1}))}}),N&&Object(c.jsx)(v,{onClose:R,children:Object(c.jsx)(S,{imageSrc:M})}),Object(c.jsx)(h.a,{position:"top-center",autoClose:3e3})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root")),N()}},[[44,1,2]]]);
//# sourceMappingURL=main.4168ecc3.chunk.js.map